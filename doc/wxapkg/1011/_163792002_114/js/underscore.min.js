var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(n) {
    return typeof n;
} : function(n) {
    return n && "function" == typeof Symbol && n.constructor === Symbol && n !== Symbol.prototype ? "symbol" : typeof n;
};

window.egret;

(function() {
    function r(n) {
        function r(r, t, e, u, i, o) {
            for (;i >= 0 && o > i; i += n) {
                var a = u ? u[i] : i;
                e = t(e, r[a], a, r);
            }
            return e;
        }
        return function(t, e, u, i) {
            e = b(e, i, 4);
            var o = !S(t) && x.keys(t), a = (o || t).length, l = n > 0 ? 0 : a - 1;
            return arguments.length < 3 && (u = t[o ? o[l] : l], l += n), r(t, e, u, o, l, a);
        };
    }
    function t(n) {
        return function(r, t, e) {
            t = w(t, e);
            for (var u = O(r), i = n > 0 ? 0 : u - 1; i >= 0 && u > i; i += n) if (t(r[i], i, r)) return i;
            return -1;
        };
    }
    function e(n, r, t) {
        return function(e, u, i) {
            var o = 0, a = O(e);
            if ("number" == typeof i) n > 0 ? o = i >= 0 ? i : Math.max(i + a, o) : a = i >= 0 ? Math.min(i + 1, a) : i + a + 1; else if (t && i && a) return i = t(e, u), 
            e[i] === u ? i : -1;
            if (u !== u) return (i = r(s.call(e, o, a), x.isNaN)) >= 0 ? i + o : -1;
            for (i = n > 0 ? o : a - 1; i >= 0 && a > i; i += n) if (e[i] === u) return i;
            return -1;
        };
    }
    function u(n, r) {
        var t = M.length, e = n.constructor, u = x.isFunction(e) && e.prototype || l, i = "constructor";
        for (x.has(n, i) && !x.contains(r, i) && r.push(i); t--; ) (i = M[t]) in n && n[i] !== u[i] && !x.contains(r, i) && r.push(i);
    }
    var i = this || exports, o = i._, a = Array.prototype, l = Object.prototype, c = Function.prototype, f = a.push, s = a.slice, p = l.toString, h = l.hasOwnProperty, d = Array.isArray, v = Object.keys, g = c.bind, y = Object.create, m = function() {}, x = function n(r) {
        return r instanceof n ? r : this instanceof n ? void (this._wrapped = r) : new n(r);
    };
    "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = x), 
    exports._ = x) : i._ = x, x.VERSION = "1.8.3";
    var b = function(n, r, t) {
        if (void 0 === r) return n;
        switch (null == t ? 3 : t) {
          case 1:
            return function(t) {
                return n.call(r, t);
            };

          case 2:
            return function(t, e) {
                return n.call(r, t, e);
            };

          case 3:
            return function(t, e, u) {
                return n.call(r, t, e, u);
            };

          case 4:
            return function(t, e, u, i) {
                return n.call(r, t, e, u, i);
            };
        }
        return function() {
            return n.apply(r, arguments);
        };
    }, w = function(n, r, t) {
        return null == n ? x.identity : x.isFunction(n) ? b(n, r, t) : x.isObject(n) ? x.matcher(n) : x.property(n);
    };
    x.iteratee = function(n, r) {
        return w(n, r, 1 / 0);
    };
    var _ = function(n, r) {
        return function(t) {
            var e = arguments.length;
            if (2 > e || null == t) return t;
            for (var u = 1; e > u; u++) for (var i = arguments[u], o = n(i), a = o.length, l = 0; a > l; l++) {
                var c = o[l];
                r && void 0 !== t[c] || (t[c] = i[c]);
            }
            return t;
        };
    }, j = function(n) {
        if (!x.isObject(n)) return {};
        if (y) return y(n);
        m.prototype = n;
        var r = new m();
        return m.prototype = null, r;
    }, A = function(n) {
        return function(r) {
            return null == r ? void 0 : r[n];
        };
    }, k = Math.pow(2, 53) - 1, O = A("length"), S = function(n) {
        var r = O(n);
        return "number" == typeof r && r >= 0 && k >= r;
    };
    x.each = x.forEach = function(n, r, t) {
        r = b(r, t);
        var e, u;
        if (S(n)) for (e = 0, u = n.length; u > e; e++) r(n[e], e, n); else {
            var i = x.keys(n);
            for (e = 0, u = i.length; u > e; e++) r(n[i[e]], i[e], n);
        }
        return n;
    }, x.map = x.collect = function(n, r, t) {
        r = w(r, t);
        for (var e = !S(n) && x.keys(n), u = (e || n).length, i = Array(u), o = 0; u > o; o++) {
            var a = e ? e[o] : o;
            i[o] = r(n[a], a, n);
        }
        return i;
    }, x.reduce = x.foldl = x.inject = r(1), x.reduceRight = x.foldr = r(-1), x.find = x.detect = function(n, r, t) {
        var e;
        return void 0 !== (e = S(n) ? x.findIndex(n, r, t) : x.findKey(n, r, t)) && -1 !== e ? n[e] : void 0;
    }, x.filter = x.select = function(n, r, t) {
        var e = [];
        return r = w(r, t), x.each(n, function(n, t, u) {
            r(n, t, u) && e.push(n);
        }), e;
    }, x.reject = function(n, r, t) {
        return x.filter(n, x.negate(w(r)), t);
    }, x.every = x.all = function(n, r, t) {
        r = w(r, t);
        for (var e = !S(n) && x.keys(n), u = (e || n).length, i = 0; u > i; i++) {
            var o = e ? e[i] : i;
            if (!r(n[o], o, n)) return !1;
        }
        return !0;
    }, x.some = x.any = function(n, r, t) {
        r = w(r, t);
        for (var e = !S(n) && x.keys(n), u = (e || n).length, i = 0; u > i; i++) {
            var o = e ? e[i] : i;
            if (r(n[o], o, n)) return !0;
        }
        return !1;
    }, x.contains = x.includes = x.include = function(n, r, t, e) {
        return S(n) || (n = x.values(n)), ("number" != typeof t || e) && (t = 0), x.indexOf(n, r, t) >= 0;
    }, x.invoke = function(n, r) {
        var t = s.call(arguments, 2), e = x.isFunction(r);
        return x.map(n, function(n) {
            var u = e ? r : n[r];
            return null == u ? u : u.apply(n, t);
        });
    }, x.pluck = function(n, r) {
        return x.map(n, x.property(r));
    }, x.where = function(n, r) {
        return x.filter(n, x.matcher(r));
    }, x.findWhere = function(n, r) {
        return x.find(n, x.matcher(r));
    }, x.max = function(n, r, t) {
        var e, u, i = -1 / 0, o = -1 / 0;
        if (null == r && null != n) for (var a = 0, l = (n = S(n) ? n : x.values(n)).length; l > a; a++) (e = n[a]) > i && (i = e); else r = w(r, t), 
        x.each(n, function(n, t, e) {
            ((u = r(n, t, e)) > o || u === -1 / 0 && i === -1 / 0) && (i = n, o = u);
        });
        return i;
    }, x.min = function(n, r, t) {
        var e, u, i = 1 / 0, o = 1 / 0;
        if (null == r && null != n) for (var a = 0, l = (n = S(n) ? n : x.values(n)).length; l > a; a++) e = n[a], 
        i > e && (i = e); else r = w(r, t), x.each(n, function(n, t, e) {
            u = r(n, t, e), (o > u || u === 1 / 0 && i === 1 / 0) && (i = n, o = u);
        });
        return i;
    }, x.shuffle = function(n) {
        for (var r, t = S(n) ? n : x.values(n), e = t.length, u = Array(e), i = 0; e > i; i++) (r = x.random(0, i)) !== i && (u[i] = u[r]), 
        u[r] = t[i];
        return u;
    }, x.sample = function(n, r, t) {
        return null == r || t ? (S(n) || (n = x.values(n)), n[x.random(n.length - 1)]) : x.shuffle(n).slice(0, Math.max(0, r));
    }, x.sortBy = function(n, r, t) {
        return r = w(r, t), x.pluck(x.map(n, function(n, t, e) {
            return {
                value: n,
                index: t,
                criteria: r(n, t, e)
            };
        }).sort(function(n, r) {
            var t = n.criteria, e = r.criteria;
            if (t !== e) {
                if (t > e || void 0 === t) return 1;
                if (e > t || void 0 === e) return -1;
            }
            return n.index - r.index;
        }), "value");
    };
    var E = function(n) {
        return function(r, t, e) {
            var u = {};
            return t = w(t, e), x.each(r, function(e, i) {
                var o = t(e, i, r);
                n(u, e, o);
            }), u;
        };
    };
    x.groupBy = E(function(n, r, t) {
        x.has(n, t) ? n[t].push(r) : n[t] = [ r ];
    }), x.indexBy = E(function(n, r, t) {
        n[t] = r;
    }), x.countBy = E(function(n, r, t) {
        x.has(n, t) ? n[t]++ : n[t] = 1;
    }), x.toArray = function(n) {
        return n ? x.isArray(n) ? s.call(n) : S(n) ? x.map(n, x.identity) : x.values(n) : [];
    }, x.size = function(n) {
        return null == n ? 0 : S(n) ? n.length : x.keys(n).length;
    }, x.partition = function(n, r, t) {
        r = w(r, t);
        var e = [], u = [];
        return x.each(n, function(n, t, i) {
            (r(n, t, i) ? e : u).push(n);
        }), [ e, u ];
    }, x.first = x.head = x.take = function(n, r, t) {
        return null != n ? null == r || t ? n[0] : x.initial(n, n.length - r) : void 0;
    }, x.initial = function(n, r, t) {
        return s.call(n, 0, Math.max(0, n.length - (null == r || t ? 1 : r)));
    }, x.last = function(n, r, t) {
        return null != n ? null == r || t ? n[n.length - 1] : x.rest(n, Math.max(0, n.length - r)) : void 0;
    }, x.rest = x.tail = x.drop = function(n, r, t) {
        return s.call(n, null == r || t ? 1 : r);
    }, x.compact = function(n) {
        return x.filter(n, x.identity);
    };
    var C = function n(r, t, e, u) {
        for (var i = [], o = 0, a = u || 0, l = O(r); l > a; a++) {
            var c = r[a];
            if (S(c) && (x.isArray(c) || x.isArguments(c))) {
                t || (c = n(c, t, e));
                var f = 0, s = c.length;
                for (i.length += s; s > f; ) i[o++] = c[f++];
            } else e || (i[o++] = c);
        }
        return i;
    };
    x.flatten = function(n, r) {
        return C(n, r, !1);
    }, x.without = function(n) {
        return x.difference(n, s.call(arguments, 1));
    }, x.uniq = x.unique = function(n, r, t, e) {
        x.isBoolean(r) || (e = t, t = r, r = !1), null != t && (t = w(t, e));
        for (var u = [], i = [], o = 0, a = O(n); a > o; o++) {
            var l = n[o], c = t ? t(l, o, n) : l;
            r ? (o && i === c || u.push(l), i = c) : t ? x.contains(i, c) || (i.push(c), u.push(l)) : x.contains(u, l) || u.push(l);
        }
        return u;
    }, x.union = function() {
        return x.uniq(C(arguments, !0, !0));
    }, x.intersection = function(n) {
        for (var r = [], t = arguments.length, e = 0, u = O(n); u > e; e++) {
            var i = n[e];
            if (!x.contains(r, i)) {
                for (var o = 1; t > o && x.contains(arguments[o], i); o++) ;
                o === t && r.push(i);
            }
        }
        return r;
    }, x.difference = function(n) {
        var r = C(arguments, !0, !0, 1);
        return x.filter(n, function(n) {
            return !x.contains(r, n);
        });
    }, x.zip = function() {
        return x.unzip(arguments);
    }, x.unzip = function(n) {
        for (var r = n && x.max(n, O).length || 0, t = Array(r), e = 0; r > e; e++) t[e] = x.pluck(n, e);
        return t;
    }, x.object = function(n, r) {
        for (var t = {}, e = 0, u = O(n); u > e; e++) r ? t[n[e]] = r[e] : t[n[e][0]] = n[e][1];
        return t;
    }, x.findIndex = t(1), x.findLastIndex = t(-1), x.sortedIndex = function(n, r, t, e) {
        for (var u = (t = w(t, e, 1))(r), i = 0, o = O(n); o > i; ) {
            var a = Math.floor((i + o) / 2);
            t(n[a]) < u ? i = a + 1 : o = a;
        }
        return i;
    }, x.indexOf = e(1, x.findIndex, x.sortedIndex), x.lastIndexOf = e(-1, x.findLastIndex), 
    x.range = function(n, r, t) {
        null == r && (r = n || 0, n = 0), t = t || 1;
        for (var e = Math.max(Math.ceil((r - n) / t), 0), u = Array(e), i = 0; e > i; i++, 
        n += t) u[i] = n;
        return u;
    };
    var F = function(n, r, t, e, u) {
        if (!(e instanceof r)) return n.apply(t, u);
        var i = j(n.prototype), o = n.apply(i, u);
        return x.isObject(o) ? o : i;
    };
    x.bind = function(n, r) {
        if (g && n.bind === g) return g.apply(n, s.call(arguments, 1));
        if (!x.isFunction(n)) throw new TypeError("Bind must be called on a function");
        var t = s.call(arguments, 2);
        return function e() {
            return F(n, e, r, this, t.concat(s.call(arguments)));
        };
    }, x.partial = function(n) {
        var r = s.call(arguments, 1);
        return function t() {
            for (var e = 0, u = r.length, i = Array(u), o = 0; u > o; o++) i[o] = r[o] === x ? arguments[e++] : r[o];
            for (;e < arguments.length; ) i.push(arguments[e++]);
            return F(n, t, this, this, i);
        };
    }, x.bindAll = function(n) {
        var r, t, e = arguments.length;
        if (1 >= e) throw new Error("bindAll must be passed function names");
        for (r = 1; e > r; r++) n[t = arguments[r]] = x.bind(n[t], n);
        return n;
    }, x.memoize = function(n, r) {
        var t = function t(e) {
            var u = t.cache, i = "" + (r ? r.apply(this, arguments) : e);
            return x.has(u, i) || (u[i] = n.apply(this, arguments)), u[i];
        };
        return t.cache = {}, t;
    }, x.delay = function(n, r) {
        var t = s.call(arguments, 2);
        return setTimeout(function() {
            return n.apply(null, t);
        }, r);
    }, x.defer = x.partial(x.delay, x, 1), x.throttle = function(n, r, t) {
        var e, u, i, o = null, a = 0;
        t || (t = {});
        var l = function() {
            a = !1 === t.leading ? 0 : x.now(), o = null, i = n.apply(e, u), o || (e = u = null);
        };
        return function() {
            var c = x.now();
            a || !1 !== t.leading || (a = c);
            var f = r - (c - a);
            return e = this, u = arguments, 0 >= f || f > r ? (o && (clearTimeout(o), o = null), 
            a = c, i = n.apply(e, u), o || (e = u = null)) : o || !1 === t.trailing || (o = setTimeout(l, f)), 
            i;
        };
    }, x.debounce = function(n, r, t) {
        var e, u, i, o, a, l = function l() {
            var c = x.now() - o;
            r > c && c >= 0 ? e = setTimeout(l, r - c) : (e = null, t || (a = n.apply(i, u), 
            e || (i = u = null)));
        };
        return function() {
            i = this, u = arguments, o = x.now();
            var c = t && !e;
            return e || (e = setTimeout(l, r)), c && (a = n.apply(i, u), i = u = null), a;
        };
    }, x.wrap = function(n, r) {
        return x.partial(r, n);
    }, x.negate = function(n) {
        return function() {
            return !n.apply(this, arguments);
        };
    }, x.compose = function() {
        var n = arguments, r = n.length - 1;
        return function() {
            for (var t = r, e = n[r].apply(this, arguments); t--; ) e = n[t].call(this, e);
            return e;
        };
    }, x.after = function(n, r) {
        return function() {
            return --n < 1 ? r.apply(this, arguments) : void 0;
        };
    }, x.before = function(n, r) {
        var t;
        return function() {
            return --n > 0 && (t = r.apply(this, arguments)), 1 >= n && (r = null), t;
        };
    }, x.once = x.partial(x.before, 2);
    var z = !{
        toString: null
    }.propertyIsEnumerable("toString"), M = [ "valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString" ];
    x.keys = function(n) {
        if (!x.isObject(n)) return [];
        if (v) return v(n);
        var r = [];
        for (var t in n) x.has(n, t) && r.push(t);
        return z && u(n, r), r;
    }, x.allKeys = function(n) {
        if (!x.isObject(n)) return [];
        var r = [];
        for (var t in n) r.push(t);
        return z && u(n, r), r;
    }, x.values = function(n) {
        for (var r = x.keys(n), t = r.length, e = Array(t), u = 0; t > u; u++) e[u] = n[r[u]];
        return e;
    }, x.mapObject = function(n, r, t) {
        r = w(r, t);
        for (var e, u = x.keys(n), i = u.length, o = {}, a = 0; i > a; a++) o[e = u[a]] = r(n[e], e, n);
        return o;
    }, x.pairs = function(n) {
        for (var r = x.keys(n), t = r.length, e = Array(t), u = 0; t > u; u++) e[u] = [ r[u], n[r[u]] ];
        return e;
    }, x.invert = function(n) {
        for (var r = {}, t = x.keys(n), e = 0, u = t.length; u > e; e++) r[n[t[e]]] = t[e];
        return r;
    }, x.functions = x.methods = function(n) {
        var r = [];
        for (var t in n) x.isFunction(n[t]) && r.push(t);
        return r.sort();
    }, x.extend = _(x.allKeys), x.extendOwn = x.assign = _(x.keys), x.findKey = function(n, r, t) {
        r = w(r, t);
        for (var e, u = x.keys(n), i = 0, o = u.length; o > i; i++) if (e = u[i], r(n[e], e, n)) return e;
    }, x.pick = function(n, r, t) {
        var e, u, i = {}, o = n;
        if (null == o) return i;
        x.isFunction(r) ? (u = x.allKeys(o), e = b(r, t)) : (u = C(arguments, !1, !1, 1), 
        e = function(n, r, t) {
            return r in t;
        }, o = Object(o));
        for (var a = 0, l = u.length; l > a; a++) {
            var c = u[a], f = o[c];
            e(f, c, o) && (i[c] = f);
        }
        return i;
    }, x.omit = function(n, r, t) {
        if (x.isFunction(r)) r = x.negate(r); else {
            var e = x.map(C(arguments, !1, !1, 1), String);
            r = function(n, r) {
                return !x.contains(e, r);
            };
        }
        return x.pick(n, r, t);
    }, x.defaults = _(x.allKeys, !0), x.create = function(n, r) {
        var t = j(n);
        return r && x.extendOwn(t, r), t;
    }, x.clone = function(n) {
        return x.isObject(n) ? x.isArray(n) ? n.slice() : x.extend({}, n) : n;
    }, x.tap = function(n, r) {
        return r(n), n;
    }, x.isMatch = function(n, r) {
        var t = x.keys(r), e = t.length;
        if (null == n) return !e;
        for (var u = Object(n), i = 0; e > i; i++) {
            var o = t[i];
            if (r[o] !== u[o] || !(o in u)) return !1;
        }
        return !0;
    };
    var $ = function r(t, e, u, i) {
        if (t === e) return 0 !== t || 1 / t == 1 / e;
        if (null == t || null == e) return t === e;
        t instanceof x && (t = t._wrapped), e instanceof x && (e = e._wrapped);
        var o = p.call(t);
        if (o !== p.call(e)) return !1;
        switch (o) {
          case "[object RegExp]":
          case "[object String]":
            return "" + t == "" + e;

          case "[object Number]":
            return +t != +t ? +e != +e : 0 == +t ? 1 / +t == 1 / e : +t == +e;

          case "[object Date]":
          case "[object Boolean]":
            return +t == +e;
        }
        var a = "[object Array]" === o;
        if (!a) {
            if ("object" != (void 0 === t ? "undefined" : n(t)) || "object" != (void 0 === e ? "undefined" : n(e))) return !1;
            var l = t.constructor, c = e.constructor;
            if (l !== c && !(x.isFunction(l) && l instanceof l && x.isFunction(c) && c instanceof c) && "constructor" in t && "constructor" in e) return !1;
        }
        u = u || [], i = i || [];
        for (var f = u.length; f--; ) if (u[f] === t) return i[f] === e;
        if (u.push(t), i.push(e), a) {
            if ((f = t.length) !== e.length) return !1;
            for (;f--; ) if (!r(t[f], e[f], u, i)) return !1;
        } else {
            var s, h = x.keys(t);
            if (f = h.length, x.keys(e).length !== f) return !1;
            for (;f--; ) if (s = h[f], !x.has(e, s) || !r(t[s], e[s], u, i)) return !1;
        }
        return u.pop(), i.pop(), !0;
    };
    x.isEqual = function(n, r) {
        return $(n, r);
    }, x.isEmpty = function(n) {
        return null == n || (S(n) && (x.isArray(n) || x.isString(n) || x.isArguments(n)) ? 0 === n.length : 0 === x.keys(n).length);
    }, x.isElement = function(n) {
        return !(!n || 1 !== n.nodeType);
    }, x.isArray = d || function(n) {
        return "[object Array]" === p.call(n);
    }, x.isObject = function(r) {
        var t = void 0 === r ? "undefined" : n(r);
        return "function" === t || "object" === t && !!r;
    }, x.each([ "Arguments", "Function", "String", "Number", "Date", "RegExp", "Error" ], function(n) {
        x["is" + n] = function(r) {
            return p.call(r) === "[object " + n + "]";
        };
    }), x.isArguments(arguments) || (x.isArguments = function(n) {
        return x.has(n, "callee");
    }), "function" != typeof /./ && "object" != ("undefined" == typeof Int8Array ? "undefined" : n(Int8Array)) && (x.isFunction = function(n) {
        return "function" == typeof n || !1;
    }), x.isFinite = function(n) {
        return isFinite(n) && !isNaN(parseFloat(n));
    }, x.isNaN = function(n) {
        return x.isNumber(n) && n !== +n;
    }, x.isBoolean = function(n) {
        return !0 === n || !1 === n || "[object Boolean]" === p.call(n);
    }, x.isNull = function(n) {
        return null === n;
    }, x.isUndefined = function(n) {
        return void 0 === n;
    }, x.has = function(n, r) {
        return null != n && h.call(n, r);
    }, x.noConflict = function() {
        return i._ = o, this;
    }, x.identity = function(n) {
        return n;
    }, x.constant = function(n) {
        return function() {
            return n;
        };
    }, x.noop = function() {}, x.property = A, x.propertyOf = function(n) {
        return null == n ? function() {} : function(r) {
            return n[r];
        };
    }, x.matcher = x.matches = function(n) {
        return n = x.extendOwn({}, n), function(r) {
            return x.isMatch(r, n);
        };
    }, x.times = function(n, r, t) {
        var e = Array(Math.max(0, n));
        r = b(r, t, 1);
        for (var u = 0; n > u; u++) e[u] = r(u);
        return e;
    }, x.random = function(n, r) {
        return null == r && (r = n, n = 0), n + Math.floor(Math.random() * (r - n + 1));
    }, x.now = Date.now || function() {
        return new Date().getTime();
    };
    var I = {
        "&": "&amp;",
        "<": "&lt;",
        ">": "&gt;",
        '"': "&quot;",
        "'": "&#x27;",
        "`": "&#x60;"
    }, N = x.invert(I), R = function(n) {
        var r = function(r) {
            return n[r];
        }, t = "(?:" + x.keys(n).join("|") + ")", e = RegExp(t), u = RegExp(t, "g");
        return function(n) {
            return n = null == n ? "" : "" + n, e.test(n) ? n.replace(u, r) : n;
        };
    };
    x.escape = R(I), x.unescape = R(N), x.result = function(n, r, t) {
        var e = null == n ? void 0 : n[r];
        return void 0 === e && (e = t), x.isFunction(e) ? e.call(n) : e;
    };
    var L = 0;
    x.uniqueId = function(n) {
        var r = ++L + "";
        return n ? n + r : r;
    }, x.templateSettings = {
        evaluate: /<%([\s\S]+?)%>/g,
        interpolate: /<%=([\s\S]+?)%>/g,
        escape: /<%-([\s\S]+?)%>/g
    };
    var B = /(.)^/, T = {
        "'": "'",
        "\\": "\\",
        "\r": "r",
        "\n": "n",
        "\u2028": "u2028",
        "\u2029": "u2029"
    }, q = /\\|'|\r|\n|\u2028|\u2029/g, U = function(n) {
        return "\\" + T[n];
    };
    x.template = function(n, r, t) {
        !r && t && (r = t), r = x.defaults({}, r, x.templateSettings);
        var e = RegExp([ (r.escape || B).source, (r.interpolate || B).source, (r.evaluate || B).source ].join("|") + "|$", "g"), u = 0, i = "__p+='";
        n.replace(e, function(r, t, e, o, a) {
            return i += n.slice(u, a).replace(q, U), u = a + r.length, t ? i += "'+\n((__t=(" + t + "))==null?'':_.escape(__t))+\n'" : e ? i += "'+\n((__t=(" + e + "))==null?'':__t)+\n'" : o && (i += "';\n" + o + "\n__p+='"), 
            r;
        }), i += "';\n", r.variable || (i = "with(obj||{}){\n" + i + "}\n"), i = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + i + "return __p;\n";
        try {
            var o = new Function(r.variable || "obj", "_", i);
        } catch (n) {
            throw n.source = i, n;
        }
        var a = function(n) {
            return o.call(this, n, x);
        }, l = r.variable || "obj";
        return a.source = "function(" + l + "){\n" + i + "}", a;
    }, x.chain = function(n) {
        var r = x(n);
        return r._chain = !0, r;
    };
    var K = function(n, r) {
        return n._chain ? x(r).chain() : r;
    };
    x.mixin = function(n) {
        x.each(x.functions(n), function(r) {
            var t = x[r] = n[r];
            x.prototype[r] = function() {
                var n = [ this._wrapped ];
                return f.apply(n, arguments), K(this, t.apply(x, n));
            };
        });
    }, x.mixin(x), x.each([ "pop", "push", "reverse", "shift", "sort", "splice", "unshift" ], function(n) {
        var r = a[n];
        x.prototype[n] = function() {
            var t = this._wrapped;
            return r.apply(t, arguments), "shift" !== n && "splice" !== n || 0 !== t.length || delete t[0], 
            K(this, t);
        };
    }), x.each([ "concat", "join", "slice" ], function(n) {
        var r = a[n];
        x.prototype[n] = function() {
            return K(this, r.apply(this._wrapped, arguments));
        };
    }), x.prototype.value = function() {
        return this._wrapped;
    }, x.prototype.valueOf = x.prototype.toJSON = x.prototype.value, x.prototype.toString = function() {
        return "" + this._wrapped;
    }, "function" == typeof define && define.amd && define("underscore", [], function() {
        return x;
    });
}).call(void 0), function(n, r) {
    var t = r.prototype.trim, e = r.prototype.trimRight, u = r.prototype.trimLeft, i = function(n) {
        return 1 * n || 0;
    }, o = function(n, r) {
        if (1 > r) return "";
        for (var t = ""; r > 0; ) 1 & r && (t += n), r >>= 1, n += n;
        return t;
    }, a = [].slice, l = function(n) {
        return null == n ? "\\s" : n.source ? n.source : "[" + h.escapeRegExp(n) + "]";
    }, c = {
        lt: "<",
        gt: ">",
        quot: '"',
        apos: "'",
        amp: "&"
    }, f = {};
    for (var s in c) f[c[s]] = s;
    var p = function() {
        function n(n) {
            return Object.prototype.toString.call(n).slice(8, -1).toLowerCase();
        }
        var t = o, e = function n() {
            return n.cache.hasOwnProperty(arguments[0]) || (n.cache[arguments[0]] = n.parse(arguments[0])), 
            n.format.call(null, n.cache[arguments[0]], arguments);
        };
        return e.format = function(e, u) {
            var i, o, a, l, c, f, s, h = 1, d = e.length, v = "", g = [];
            for (o = 0; d > o; o++) if ("string" === (v = n(e[o]))) g.push(e[o]); else if ("array" === v) {
                if ((l = e[o])[2]) for (i = u[h], a = 0; a < l[2].length; a++) {
                    if (!i.hasOwnProperty(l[2][a])) throw new Error(p('[_.sprintf] property "%s" does not exist', l[2][a]));
                    i = i[l[2][a]];
                } else i = l[1] ? u[l[1]] : u[h++];
                if (/[^s]/.test(l[8]) && "number" != n(i)) throw new Error(p("[_.sprintf] expecting number but found %s", n(i)));
                switch (l[8]) {
                  case "b":
                    i = i.toString(2);
                    break;

                  case "c":
                    i = r.fromCharCode(i);
                    break;

                  case "d":
                    i = parseInt(i, 10);
                    break;

                  case "e":
                    i = l[7] ? i.toExponential(l[7]) : i.toExponential();
                    break;

                  case "f":
                    i = l[7] ? parseFloat(i).toFixed(l[7]) : parseFloat(i);
                    break;

                  case "o":
                    i = i.toString(8);
                    break;

                  case "s":
                    i = (i = r(i)) && l[7] ? i.substring(0, l[7]) : i;
                    break;

                  case "u":
                    i = Math.abs(i);
                    break;

                  case "x":
                    i = i.toString(16);
                    break;

                  case "X":
                    i = i.toString(16).toUpperCase();
                }
                i = /[def]/.test(l[8]) && l[3] && i >= 0 ? "+" + i : i, f = l[4] ? "0" == l[4] ? "0" : l[4].charAt(1) : " ", 
                s = l[6] - r(i).length, c = l[6] ? t(f, s) : "", g.push(l[5] ? i + c : c + i);
            }
            return g.join("");
        }, e.cache = {}, e.parse = function(n) {
            for (var r = n, t = [], e = [], u = 0; r; ) {
                if (null !== (t = /^[^\x25]+/.exec(r))) e.push(t[0]); else if (null !== (t = /^\x25{2}/.exec(r))) e.push("%"); else {
                    if (null === (t = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r))) throw new Error("[_.sprintf] huh?");
                    if (t[2]) {
                        u |= 1;
                        var i = [], o = t[2], a = [];
                        if (null === (a = /^([a-z_][a-z_\d]*)/i.exec(o))) throw new Error("[_.sprintf] huh?");
                        for (i.push(a[1]); "" !== (o = o.substring(a[0].length)); ) if (null !== (a = /^\.([a-z_][a-z_\d]*)/i.exec(o))) i.push(a[1]); else {
                            if (null === (a = /^\[(\d+)\]/.exec(o))) throw new Error("[_.sprintf] huh?");
                            i.push(a[1]);
                        }
                        t[2] = i;
                    } else u |= 2;
                    if (3 === u) throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                    e.push(t);
                }
                r = r.substring(t[0].length);
            }
            return e;
        }, e;
    }(), h = {
        VERSION: "2.3.0",
        isBlank: function(n) {
            return null == n && (n = ""), /^\s*$/.test(n);
        },
        stripTags: function(n) {
            return null == n ? "" : r(n).replace(/<\/?[^>]+>/g, "");
        },
        capitalize: function(n) {
            return (n = null == n ? "" : r(n)).charAt(0).toUpperCase() + n.slice(1);
        },
        chop: function(n, t) {
            return null == n ? [] : (n = r(n), (t = ~~t) > 0 ? n.match(new RegExp(".{1," + t + "}", "g")) : [ n ]);
        },
        clean: function(n) {
            return h.strip(n).replace(/\s+/g, " ");
        },
        count: function(n, t) {
            return null == n || null == t ? 0 : r(n).split(t).length - 1;
        },
        chars: function(n) {
            return null == n ? [] : r(n).split("");
        },
        swapCase: function(n) {
            return null == n ? "" : r(n).replace(/\S/g, function(n) {
                return n === n.toUpperCase() ? n.toLowerCase() : n.toUpperCase();
            });
        },
        escapeHTML: function(n) {
            return null == n ? "" : r(n).replace(/[&<>"']/g, function(n) {
                return "&" + f[n] + ";";
            });
        },
        unescapeHTML: function(n) {
            return null == n ? "" : r(n).replace(/\&([^;]+);/g, function(n, t) {
                var e;
                return t in c ? c[t] : (e = t.match(/^#x([\da-fA-F]+)$/)) ? r.fromCharCode(parseInt(e[1], 16)) : (e = t.match(/^#(\d+)$/)) ? r.fromCharCode(~~e[1]) : n;
            });
        },
        escapeRegExp: function(n) {
            return null == n ? "" : r(n).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1");
        },
        splice: function(n, r, t, e) {
            var u = h.chars(n);
            return u.splice(~~r, ~~t, e), u.join("");
        },
        insert: function(n, r, t) {
            return h.splice(n, r, 0, t);
        },
        include: function(n, t) {
            return "" === t || null != n && -1 !== r(n).indexOf(t);
        },
        join: function() {
            var n = a.call(arguments), r = n.shift();
            return null == r && (r = ""), n.join(r);
        },
        lines: function(n) {
            return null == n ? [] : r(n).split("\n");
        },
        reverse: function(n) {
            return h.chars(n).reverse().join("");
        },
        startsWith: function(n, t) {
            return "" === t || null != n && null != t && (n = r(n), t = r(t), n.length >= t.length && n.slice(0, t.length) === t);
        },
        endsWith: function(n, t) {
            return "" === t || null != n && null != t && (n = r(n), t = r(t), n.length >= t.length && n.slice(n.length - t.length) === t);
        },
        succ: function(n) {
            return null == n ? "" : (n = r(n)).slice(0, -1) + r.fromCharCode(n.charCodeAt(n.length - 1) + 1);
        },
        titleize: function(n) {
            return null == n ? "" : r(n).replace(/(?:^|\s)\S/g, function(n) {
                return n.toUpperCase();
            });
        },
        camelize: function(n) {
            return h.trim(n).replace(/[-_\s]+(.)?/g, function(n, r) {
                return r.toUpperCase();
            });
        },
        underscored: function(n) {
            return h.trim(n).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase();
        },
        dasherize: function(n) {
            return h.trim(n).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase();
        },
        classify: function(n) {
            return h.titleize(r(n).replace(/_/g, " ")).replace(/\s/g, "");
        },
        humanize: function(n) {
            return h.capitalize(h.underscored(n).replace(/_id$/, "").replace(/_/g, " "));
        },
        trim: function(n, e) {
            return null == n ? "" : !e && t ? t.call(n) : (e = l(e), r(n).replace(new RegExp("^" + e + "+|" + e + "+$", "g"), ""));
        },
        ltrim: function(n, t) {
            return null == n ? "" : !t && u ? u.call(n) : (t = l(t), r(n).replace(new RegExp("^" + t + "+"), ""));
        },
        rtrim: function(n, t) {
            return null == n ? "" : !t && e ? e.call(n) : (t = l(t), r(n).replace(new RegExp(t + "+$"), ""));
        },
        truncate: function(n, t, e) {
            return null == n ? "" : (n = r(n), e = e || "...", t = ~~t, n.length > t ? n.slice(0, t) + e : n);
        },
        prune: function(n, t, e) {
            if (null == n) return "";
            if (n = r(n), t = ~~t, e = null != e ? r(e) : "...", n.length <= t) return n;
            var u = n.slice(0, t + 1).replace(/.(?=\W*\w*$)/g, function(n) {
                return n.toUpperCase() !== n.toLowerCase() ? "A" : " ";
            });
            return ((u = u.slice(u.length - 2).match(/\w\w/) ? u.replace(/\s*\S+$/, "") : h.rtrim(u.slice(0, u.length - 1))) + e).length > n.length ? n : n.slice(0, u.length) + e;
        },
        words: function(n, r) {
            return h.isBlank(n) ? [] : h.trim(n, r).split(r || /\s+/);
        },
        pad: function(n, t, e, u) {
            n = null == n ? "" : r(n), t = ~~t;
            var i = 0;
            switch (e ? e.length > 1 && (e = e.charAt(0)) : e = " ", u) {
              case "right":
                return i = t - n.length, n + o(e, i);

              case "both":
                return i = t - n.length, o(e, Math.ceil(i / 2)) + n + o(e, Math.floor(i / 2));

              default:
                return i = t - n.length, o(e, i) + n;
            }
        },
        lpad: function(n, r, t) {
            return h.pad(n, r, t);
        },
        rpad: function(n, r, t) {
            return h.pad(n, r, t, "right");
        },
        lrpad: function(n, r, t) {
            return h.pad(n, r, t, "both");
        },
        sprintf: p,
        vsprintf: function(n, r) {
            return r.unshift(n), p.apply(null, r);
        },
        toNumber: function(n, t) {
            if (null == n || "" == n) return 0;
            n = r(n);
            var e = i(i(n).toFixed(~~t));
            return 0 !== e || n.match(/^0+$/) ? e : Number.NaN;
        },
        numberFormat: function(n, r, t, e) {
            if (isNaN(n) || null == n) return "";
            n = n.toFixed(~~r), e = e || ",";
            var u = n.split("."), i = u[0], o = u[1] ? (t || ".") + u[1] : "";
            return i.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + e) + o;
        },
        strRight: function(n, t) {
            if (null == n) return "";
            n = r(n);
            var e = (t = null != t ? r(t) : t) ? n.indexOf(t) : -1;
            return ~e ? n.slice(e + t.length, n.length) : n;
        },
        strRightBack: function(n, t) {
            if (null == n) return "";
            n = r(n);
            var e = (t = null != t ? r(t) : t) ? n.lastIndexOf(t) : -1;
            return ~e ? n.slice(e + t.length, n.length) : n;
        },
        strLeft: function(n, t) {
            if (null == n) return "";
            n = r(n);
            var e = (t = null != t ? r(t) : t) ? n.indexOf(t) : -1;
            return ~e ? n.slice(0, e) : n;
        },
        strLeftBack: function(n, r) {
            if (null == n) return "";
            n += "", r = null != r ? "" + r : r;
            var t = n.lastIndexOf(r);
            return ~t ? n.slice(0, t) : n;
        },
        toSentence: function(n, r, t, e) {
            r = r || ", ", t = t || " and ";
            var u = n.slice(), i = u.pop();
            return n.length > 2 && e && (t = h.rtrim(r) + t), u.length ? u.join(r) + t + i : i;
        },
        toSentenceSerial: function() {
            var n = a.call(arguments);
            return n[3] = !0, h.toSentence.apply(h, n);
        },
        slugify: function(n) {
            if (null == n) return "";
            var t = "ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź", e = new RegExp(l(t), "g");
            return n = r(n).toLowerCase().replace(e, function(n) {
                var r = t.indexOf(n);
                return "aaaaaaaaceeeeeiiiilnoooooouuuunczz".charAt(r) || "-";
            }), h.dasherize(n.replace(/[^\w\s-]/g, ""));
        },
        surround: function(n, r) {
            return [ r, n, r ].join("");
        },
        quote: function(n) {
            return h.surround(n, '"');
        },
        exports: function() {
            var n = {};
            for (var r in this) this.hasOwnProperty(r) && !r.match(/^(?:include|contains|reverse)$/) && (n[r] = this[r]);
            return n;
        },
        repeat: function(n, t, e) {
            if (null == n) return "";
            if (t = ~~t, null == e) return o(r(n), t);
            for (var u = []; t > 0; u[--t] = n) ;
            return u.join(e);
        },
        levenshtein: function(n, t) {
            if (null == n && null == t) return 0;
            if (null == n) return r(t).length;
            if (null == t) return r(n).length;
            n = r(n), t = r(t);
            for (var e, u, i = [], o = 0; o <= t.length; o++) for (var a = 0; a <= n.length; a++) u = o && a ? n.charAt(a - 1) === t.charAt(o - 1) ? e : Math.min(i[a], i[a - 1], e) + 1 : o + a, 
            e = i[a], i[a] = u;
            return i.pop();
        }
    };
    h.strip = h.trim, h.lstrip = h.ltrim, h.rstrip = h.rtrim, h.center = h.lrpad, h.rjust = h.lpad, 
    h.ljust = h.rpad, h.contains = h.include, h.q = h.quote, "undefined" != typeof exports ? ("undefined" != typeof module && module.exports, 
    exports._s = h) : "function" == typeof define && define.amd ? define("underscore.string", [], function() {
        return h;
    }) : (n._ = n._ || {}, n._.string = n._.str = h);
}(exports, String), "undefined" != typeof exports ? exports.mixin(exports._s.exports()) : _.mixin(_.str.exports());