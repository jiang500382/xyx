var e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
    return typeof e;
} : function(e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
};

module.exports = function(t) {
    function n(e) {
        if (r[e]) return r[e].exports;
        var o = r[e] = {
            i: e,
            l: !1,
            exports: {}
        };
        return t[e].call(o.exports, o, o.exports, n), o.l = !0, o.exports;
    }
    var r = {};
    return n.m = t, n.c = r, n.d = function(e, t, r) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: r
        });
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        });
    }, n.t = function(t, r) {
        if (1 & r && (t = n(t)), 8 & r) return t;
        if (4 & r && "object" == (void 0 === t ? "undefined" : e(t)) && t && t.__esModule) return t;
        var o = Object.create(null);
        if (n.r(o), Object.defineProperty(o, "default", {
            enumerable: !0,
            value: t
        }), 2 & r && "string" != typeof t) for (var i in t) n.d(o, i, function(e) {
            return t[e];
        }.bind(null, i));
        return o;
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default;
        } : function() {
            return e;
        };
        return n.d(t, "a", t), t;
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t);
    }, n.p = "", n(n.s = 4);
}([ function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), o = 1, i = (t.LOG_TYPE = {
        UNCAUGHT_ERROR: "unc-err",
        RES_REQ: "res-req",
        RES_ERROR: "res-err",
        DOWNLOAD_ERROR: "down-err",
        DOWNLOAD_REQ: "down-req",
        UPLOAD_REQ: "up-req",
        UPLOAD_ERROR: "up-err",
        SOCKET_REQ: "soc-req",
        SOCKET_ERROR: "soc-err",
        APP_LANCH: "app-lanch",
        APP_ERROR: "app-err",
        PAGE_NOT_FIND: "page-null",
        PAGE_LOAD: "page-load",
        PAGE_READY: "page-ready",
        GAME_NOTICE: "game-notice",
        GAME_ERROR: "game-error"
    }, function() {
        function e(t) {
            var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.id = o++, this.logType = t, this.extra = {}, this.collected = !1, 
            this.collector = n;
        }
        return r(e, [ {
            key: "setType",
            value: function(e) {
                return this.logType = e, this;
            }
        }, {
            key: "addExtra",
            value: function(e) {
                return e.url && (this.resURI = e.url), e.errMsg && !e.msg && (e.msg = e.errMsg), 
                this.extra = Object.assign(this.extra, e), this;
            }
        }, {
            key: "start",
            value: function() {
                return this.startTime = new Date().getTime(), this;
            }
        }, {
            key: "end",
            value: function() {
                return this.timestamp = new Date().getTime() - this.startTime, this.collect(), this;
            }
        }, {
            key: "collect",
            value: function() {
                return this.collected || "function" != typeof this.collector.collect || (this.collected = !0, 
                this.collector.collect(this)), this;
            }
        }, {
            key: "tryReport",
            value: function() {
                return this.collected || "function" != typeof this.collector.tryReport || (this.collected = !0, 
                this.collector.tryReport(this)), this;
            }
        }, {
            key: "toJSON",
            value: function() {
                return {
                    res: this.resURI,
                    type: this.logType,
                    ts: this.timestamp,
                    ext: this.extra
                };
            }
        } ]), e;
    }());
    t.default = i;
}, function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), o = function() {
        function e(t) {
            var n = t.wx, r = t.config, o = t.tracker;
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.wx = n, this.config = r, this.tracker = o;
        }
        return r(e, [ {
            key: "handle",
            value: function() {}
        } ]), e;
    }();
    t.default = o;
}, function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = function(e, t, n) {
        var r = e[t];
        Object.defineProperty(e, t, {
            value: n(r)
        });
    };
}, function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.DEFAULT_CONFIG = {
        Debug: !1,
        ReportDelay: 6e4,
        ClearRepeatLog: !1,
        EnabledDownLoadErr: !0,
        EnabledDownLoadPerf: !0,
        EnabledUpLoadErr: !0,
        EnabledUpLoadPerf: !0,
        EnabledConsoleErr: !1,
        EnabledAppOnErr: !0,
        EnabledAppLaunch: !0,
        EnabledPagePerf: !0,
        EnabledResErr: !0,
        EnabledResPerf: !0,
        EnabledSocket: !1,
        Filters: [],
        reportUrlProc: "https://platform.hortorgames.com/wxlog/api/v1/apmlog",
        reportUrlDev: "https://platform-test.hortorgames.com/wxlog/api/v1/apmlog"
    }, t.Extra_CONFIG = {
        Filters: [ /\/v1\/statlog$/, /\/v1\/log$/ ]
    };
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    var i = "function" == typeof Symbol && "symbol" == e(Symbol.iterator) ? function(t) {
        return void 0 === t ? "undefined" : e(t);
    } : function(t) {
        return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : void 0 === t ? "undefined" : e(t);
    }, a = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), u = o(r(5)), c = r(3), s = r(0), l = o(r(14)), f = function() {
        function e() {
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e);
        }
        return a(e, [ {
            key: "init",
            value: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : c.DEFAULT_CONFIG;
                "string" == typeof e ? t.gameId = e : "object" === (void 0 === e ? "undefined" : i(e)) && (t = Object.assign({}, t, e)), 
                t.Debug = !t.env || "Prod" !== t.env || t.Debug, console.log("[APM] config", t), 
                this.wxTracker = new u.default(wx, Object.assign({}, c.DEFAULT_CONFIG, l.default, t)).track();
            }
        }, {
            key: "notify",
            value: function(e, t) {
                return this.wxTracker && this.newTracker(s.LOG_TYPE.GAME_NOTICE, Object.assign({
                    msg: e
                }, t)).collect();
            }
        }, {
            key: "notifyError",
            value: function(e, t) {
                return this.wxTracker && this.newTracker(s.LOG_TYPE.GAME_ERROR, Object.assign({
                    msg: e
                }, t)).collect();
            }
        }, {
            key: "newTracker",
            value: function(e, t) {
                return this.wxTracker && this.wxTracker.tracker(e, t);
            }
        }, {
            key: "setUserInfo",
            value: function(e) {
                this.wxTracker && this.wxTracker.setUserInfo(e);
            }
        } ]), e;
    }();
    t.exports = new f();
}, function(e, t, n) {
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), i = r(n(6)), a = r(n(0)), u = r(n(9)), c = r(n(10)), s = r(n(11)), l = r(n(12)), f = r(n(13)), d = function() {
        function e(t, n) {
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.wx = t, this.config = n, this.collector = this.collector || new i.default(t, n);
            var r = {
                wx: t,
                config: n,
                tracker: this.tracker.bind(this)
            };
            this.handlers = [ new l.default(r), new f.default(r), new c.default(r), new u.default(r), new s.default(r) ];
        }
        return o(e, [ {
            key: "track",
            value: function() {
                return this.handlers.forEach(function(e) {
                    e.handle();
                }), this;
            }
        }, {
            key: "tracker",
            value: function(e) {
                var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return new a.default(e, this.collector).addExtra(t);
            }
        }, {
            key: "setUserInfo",
            value: function(e) {
                this.collector.setUserInfo(e);
            }
        } ]), e;
    }();
    t.default = d;
}, function(e, t, n) {
    function r(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), i = r(n(7)), a = n(3), u = r(n(8)), c = function() {
        function e(t, n) {
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.logs = [], this.started = !1, this.wx = t, this.modal = new u.default(t), 
            this.config = n, this.reporter = new i.default(this.wx, n);
        }
        return o(e, [ {
            key: "setUserInfo",
            value: function(e) {
                this.reporter.setUserInfo(e);
            }
        }, {
            key: "fixedReport",
            value: function() {
                var e = this;
                setTimeout(function() {
                    e.reporter.report(e.logs), e.logs = [], e.fixedReport();
                }, this.config.ReportDelay);
            }
        }, {
            key: "tryReport",
            value: function(e) {
                var t = this;
                if (!this.config.Debug) return this.collect(e);
                this.checkValid(e) && this.reporter.report([ e ], function() {
                    var n = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).data || [];
                    n[0] && t.modal.alert("错误信息：" + JSON.stringify(e.extra), "错误ID：" + n[0]);
                });
            }
        }, {
            key: "collect",
            value: function(e) {
                this.checkValid(e) && (this.add(e), this.started || (this.started = !0, this.fixedReport()));
            }
        }, {
            key: "checkValid",
            value: function(e) {
                return !(!e || e.resURI && e.resURI.startsWith(this.reporter.getReportUrl()) || e.resURI && (this.filters || (this.filters = a.Extra_CONFIG.Filters || [], 
                this.filters = this.filters.concat(this.config.Filters)), this.filters.length && this.filters.some(function(t) {
                    return t && t.test && t.test(e.resURI);
                })));
            }
        }, {
            key: "isRepeat",
            value: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
                return !(!e.id || e.id !== t.id) || !!this.config.ClearRepeatLog && [ "resURI", "logType", "extra" ].every(function(n) {
                    return console.log(n, JSON.stringify(e[n]) === JSON.stringify(t[n])), JSON.stringify(e[n]) == JSON.stringify(t[n]);
                });
            }
        }, {
            key: "add",
            value: function(e) {
                var t = this;
                this.logs.some(function(n, r) {
                    if (t.isRepeat(e, n)) return (!e.timestamp || e.timestamp > n.timestamp) && (t.logs[r] = e), 
                    !0;
                }) || this.logs.push(e);
            }
        } ]), e;
    }();
    t.default = c;
}, function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), o = function() {
        function e(t, n) {
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.clientInfo = null, this.wx = t, this.config = n;
        }
        return r(e, [ {
            key: "setUserInfo",
            value: function(e) {
                this.config.userInfo = Object.assign(this.config.userInfo || {}, e);
            }
        }, {
            key: "getClientInfo",
            value: function() {
                if (this.clientInfo) return this.clientInfo;
                var e = this.wx.getSystemInfoSync();
                return this.clientInfo = {
                    version: e.version,
                    system: e.system,
                    platform: e.platform,
                    sdk: e.SDKVersion,
                    model: e.model
                };
            }
        }, {
            key: "report",
            value: function(e, t) {
                if (e && e.length) {
                    var n = e.map(function(e) {
                        return e.toJSON();
                    }), r = this.config, o = {
                        game: {
                            gameId: r.gameId,
                            version: r.gameVersion,
                            env: r.env
                        },
                        client: this.getClientInfo(),
                        user: r.userInfo,
                        logs: n,
                        needID: this.config.Debug && "function" == typeof t
                    };
                    this.post(o, t);
                }
            }
        }, {
            key: "getReportUrl",
            value: function() {
                return this.config.Debug ? this.config.reportUrlDev : this.config.reportUrlProc;
            }
        }, {
            key: "post",
            value: function(e, t) {
                this.wx.request({
                    url: this.getReportUrl(),
                    method: "POST",
                    data: e,
                    header: {
                        "content-type": "application/json"
                    },
                    success: function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                        console.log("[APM] post success", e.statusCode), t && t(e.data);
                    }
                });
            }
        } ]), e;
    }();
    t.default = o;
}, function(e, t, n) {
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), o = function() {
        function e(t) {
            !function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, e), this.modalStack = [], this.showIng = !1, this.wx = t;
        }
        return r(e, [ {
            key: "isFun",
            value: function(e) {
                return !(!e || "function" != typeof e);
            }
        }, {
            key: "show",
            value: function(e) {
                var t = this;
                if (this.showIng) return this.modalStack.push(this.show.bind(this, e));
                this.showIng = !0;
                var n = e.success;
                this.wx.showModal(Object.assign(e, {
                    success: function(e) {
                        if (t.showIng = !1, t.modalStack.length) {
                            var r = t.modalStack.pop();
                            t.isFun(r) && r();
                        }
                        t.isFun(n) && n(e);
                    }
                }));
            }
        }, {
            key: "alert",
            value: function(e, t, n) {
                this.show({
                    title: t,
                    content: e,
                    showCancel: !1,
                    confirmText: "知道了",
                    success: n
                });
            }
        } ]), e;
    }();
    t.default = o;
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(n, "__esModule", {
        value: !0
    });
    var i = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), a = o(r(1)), u = o(r(2)), c = r(0), s = function(t) {
        function n(t) {
            return function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, n), function(t, n) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !n || "object" != (void 0 === n ? "undefined" : e(n)) && "function" != typeof n ? t : n;
            }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t));
        }
        return function(t, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === n ? "undefined" : e(n)));
            t.prototype = Object.create(n && n.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : t.__proto__ = n);
        }(n, a.default), i(n, [ {
            key: "handle",
            value: function() {
                (this.config.EnabledDownLoadErr || this.config.EnabledDownLoadPerf) && (0, u.default)(this.wx, "downloadFile", this.downloadFileHandler.bind(this));
            }
        }, {
            key: "downloadFileHandler",
            value: function(e) {
                var t = this;
                return function(n) {
                    var r = t.tracker("", {
                        url: n.url,
                        filePath: n.filePath
                    }).start(), o = function(e) {
        //                console.log("[APM] download err", e), t.config.EnabledDownLoadErr && r.setType(c.LOG_TYPE.DOWNLOAD_ERROR).addExtra(e).end();
                    };
                    return e(Object.assign({}, n, {
                        success: function(e) {
                            var i = e.statusCode;
                            200 == i ? function(e) {
                                t.config.EnabledDownLoadPerf && r.setType(c.LOG_TYPE.DOWNLOAD_REQ).addExtra(e).end();
                            }({
                                status: i
                            }) : o({
                                status: i,
                                err: e.data
                            }), n.success && n.success.call(this, e);
                        },
                        fail: function(e) {
                            o({
                                err: e
                            }), n.fail && n.fail.call(this, e);
                        }
                    }));
                };
            }
        } ]), n;
    }();
    n.default = s;
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(n, "__esModule", {
        value: !0
    });
    var i = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), a = o(r(1)), u = o(r(2)), c = r(0), s = function(t) {
        function n(t) {
            return function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, n), function(t, n) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !n || "object" != (void 0 === n ? "undefined" : e(n)) && "function" != typeof n ? t : n;
            }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t));
        }
        return function(t, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === n ? "undefined" : e(n)));
            t.prototype = Object.create(n && n.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : t.__proto__ = n);
        }(n, a.default), i(n, [ {
            key: "handle",
            value: function() {
                (this.config.EnabledResErr || this.config.EnabledResPerf) && (0, u.default)(this.wx, "request", this.requestHandler.bind(this));
            }
        }, {
            key: "requestHandler",
            value: function(e) {
                var t = this;
                return function(n) {
                    var r = t.tracker("", {
                        url: n.url,
                        method: n.method
                    }).start(), o = function(e) {
                        console.log("[APM] request err", e), t.config.EnabledResErr && r.setType(c.LOG_TYPE.RES_ERROR).addExtra(e).end();
                    };
                    return e(Object.assign({}, n, {
                        success: function(e) {
                            var i = e.statusCode;
                            200 == i ? function(e) {
                                t.config.EnabledResPerf && r.setType(c.LOG_TYPE.RES_REQ).addExtra(e).end();
                            }({
                                status: i
                            }) : o({
                                status: i,
                                err: e.data
                            }), n.success && n.success.call(this, e);
                        },
                        fail: function(e) {
                            o({
                                err: e
                            }), n.fail && n.fail.call(this, e);
                        }
                    }));
                };
            }
        } ]), n;
    }();
    n.default = s;
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(n, "__esModule", {
        value: !0
    });
    var i = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), a = o(r(1)), u = o(r(2)), c = r(0), s = function(t) {
        function n(t) {
            return function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, n), function(t, n) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !n || "object" != (void 0 === n ? "undefined" : e(n)) && "function" != typeof n ? t : n;
            }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t));
        }
        return function(t, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === n ? "undefined" : e(n)));
            t.prototype = Object.create(n && n.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : t.__proto__ = n);
        }(n, a.default), i(n, [ {
            key: "handle",
            value: function() {
                (this.config.EnabledUpLoadErr || this.config.EnabledUpLoadPerf) && (0, u.default)(this.wx, "uploadFile", this.uploadFileHandler.bind(this));
            }
        }, {
            key: "uploadFileHandler",
            value: function(e) {
                var t = this;
                return function(n) {
                    var r = t.tracker("", {
                        url: n.url,
                        filePath: n.method
                    }).start(), o = function(e) {
                        console.log("[APM] upload err", e), t.config.EnabledUpLoadErr && r.setType(c.LOG_TYPE.UPLOAD_ERROR).addExtra(e).end();
                    };
                    return e(Object.assign({}, n, {
                        success: function(e) {
                            var i = e.statusCode;
                            200 == i ? function(e) {
                                t.config.EnabledUpLoadPerf && r.setType(c.LOG_TYPE.UPLOAD_REQ).addExtra(e).end();
                            }({
                                status: i
                            }) : o({
                                status: i,
                                err: e.data
                            }), n.success && n.success.call(this, e);
                        },
                        fail: function(e) {
                            o({
                                err: e
                            }), n.fail && n.fail.call(this, e);
                        }
                    }));
                };
            }
        } ]), n;
    }();
    n.default = s;
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(n, "__esModule", {
        value: !0
    });
    var i = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), a = o(r(1)), u = o(r(2)), c = r(0), s = function(t) {
        function n(t) {
            return function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, n), function(t, n) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !n || "object" != (void 0 === n ? "undefined" : e(n)) && "function" != typeof n ? t : n;
            }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t));
        }
        return function(t, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === n ? "undefined" : e(n)));
            t.prototype = Object.create(n && n.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : t.__proto__ = n);
        }(n, a.default), i(n, [ {
            key: "handle",
            value: function() {
                this.config.EnabledSocket && (0, u.default)(this.wx, "connectSocket", this.connectSocketHandler.bind(this));
            }
        }, {
            key: "connectSocketHandler",
            value: function(e) {
                var t = this;
                return function(n) {
                    var r = {
                        url: n.url,
                        method: n.method,
                        protocols: n.protocols
                    }, o = t.tracker("", r).start(), i = function(e) {
                        o.setType(c.LOG_TYPE.SOCKET_ERROR).addExtra(e).end();
                    }, a = e(Object.assign({}, n, {
                        success: function(e) {
                            var t = e.statusCode;
                            200 == t ? function(e) {
                                o.setType(c.LOG_TYPE.SOCKET_REQ).addExtra(e).end();
                            }({
                                status: t
                            }) : i({
                                status: t,
                                err: e.data
                            }), n.success && n.success.call(this, e);
                        },
                        fail: function(e) {
                            i({
                                err: e
                            }), n.fail && n.fail.call(t, e);
                        }
                    }));
                    return a.onError(function(e) {
                        !function(e) {
                            t.tracker(c.LOG_TYPE.SOCKET_ERROR, r).addExtra(e).collect();
                        }({
                            err: e
                        });
                    }), a;
                };
            }
        } ]), n;
    }();
    n.default = s;
}, function(t, n, r) {
    function o(e) {
        return e && e.__esModule ? e : {
            default: e
        };
    }
    Object.defineProperty(n, "__esModule", {
        value: !0
    });
    var i = function() {
        function e(e, t) {
            for (var n = 0; n < t.length; n++) {
                var r = t[n];
                r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), 
                Object.defineProperty(e, r.key, r);
            }
        }
        return function(t, n, r) {
            return n && e(t.prototype, n), r && e(t, r), t;
        };
    }(), a = o(r(1)), u = o(r(2)), c = r(0), s = function(t) {
        function n(t) {
            return function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function");
            }(this, n), function(t, n) {
                if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return !n || "object" != (void 0 === n ? "undefined" : e(n)) && "function" != typeof n ? t : n;
            }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, t));
        }
        return function(t, n) {
            if ("function" != typeof n && null !== n) throw new TypeError("Super expression must either be null or a function, not " + (void 0 === n ? "undefined" : e(n)));
            t.prototype = Object.create(n && n.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), n && (Object.setPrototypeOf ? Object.setPrototypeOf(t, n) : t.__proto__ = n);
        }(n, a.default), i(n, [ {
            key: "handle",
            value: function() {
                "undefined" != typeof console && this.config.EnabledConsoleErr && (0, u.default)(console, "error", this.consoleErrorHandler.bind(this)), 
                this.wx.onError && this.config.EnabledAppOnErr && this.bindOnErrorHandler();
            }
        }, {
            key: "renderErrMsg",
            value: function() {
                var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "";
                if (e && "string" != typeof e) return {
                    msg: JSON.stringify(e)
                };
                var t = e.split("\n"), n = t.slice(0, 2).join("\n"), r = t.slice(2), o = (r[1] || "").split(":"), i = (o.pop() || "").replace(")", "") - 0, a = (o.pop() || "") - 0;
                return isNaN(a) && (a = 0), {
                    line: a,
                    column: i,
                    msg: n,
                    stack: r
                };
            }
        }, {
            key: "bindOnErrorHandler",
            value: function() {
                var e = this;
                this.wx.onError(function(t) {
                    var n = e.renderErrMsg(t.message);
                    n.stack = t.stack || n.stack, e.tracker(c.LOG_TYPE.UNCAUGHT_ERROR).addExtra(n).tryReport();
                });
            }
        }, {
            key: "consoleErrorHandler",
            value: function(e) {
                var t = this;
                return function() {
                    for (var n = arguments.length, r = Array(n), o = 0; o < n; o++) r[o] = arguments[o];
                    return function() {
                        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = t.renderErrMsg(e[0]);
                        t.tracker(c.LOG_TYPE.UNCAUGHT_ERROR).addExtra(n).tryReport();
                    }(r), e.apply(void 0, r);
                };
            }
        } ]), n;
    }();
    n.default = s;
}, function(e, t, n) {
    e.exports = {
        reportUrlProc: "https://platform.hortorgames.com/wxlog/api/v1/h5log",
        reportUrlDev: "https://platform-test.hortorgames.com/wxlog/api/v1/h5log",
        version: "0.1.4-2018-9-25",
        date: 1537850575761,
        mode: "dev"
    };
} ]);